{% extends "mebel/base.html" %}
{% load static %}

{% block title %}–û–ø–µ—Ä–∞—Ü–∏—è #{{ operation.id }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        {% if operation.operation_type == 'receipt' %}
                            üìà –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ
                        {% else %}
                            üìâ –°–ø–∏—Å–∞–Ω–∏–µ
                        {% endif %}
                        #{{ operation.id }}
                    </h5>
                    <span class="badge {% if operation.can_edit %}bg-warning{% else %}bg-secondary{% endif %}">
                        {% if operation.can_edit %}–ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å{% else %}–¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä{% endif %}
                    </span>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h6>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <strong>–ú–∞—Ç–µ—Ä–∏–∞–ª:</strong>
                                    <a href="{{ operation.material.get_absolute_url }}">
                                        {{ operation.material.name }}
                                    </a>
                                </li>
                                <li class="list-group-item">
                                    <strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> {{ operation.quantity }} —à—Ç.
                                </li>
                                <li class="list-group-item">
                                    <strong>–î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏:</strong> {{ operation.created|date:"d.m.Y H:i" }}
                                </li>
                                <li class="list-group-item">
                                    <strong>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> {{ operation.user.get_full_name|default:operation.user.username }}
                                </li>
                            </ul>
                        </div>
                        
                        <div class="col-md-6">
                            <h6>–î–µ—Ç–∞–ª–∏</h6>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <strong>–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏:</strong>
                                    {% if operation.operation_type == 'receipt' %}
                                        <span class="badge bg-success">–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ</span>
                                    {% else %}
                                        <span class="badge bg-danger">–°–ø–∏—Å–∞–Ω–∏–µ</span>
                                    {% endif %}
                                </li>
                                <li class="list-group-item">
                                    <strong>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞:</strong> {{ operation.material.balance }} —à—Ç.
                                </li>
                                <li class="list-group-item">
                                    <strong>–î–æ—Å—Ç—É–ø–Ω–æ:</strong> {{ operation.material.available }} —à—Ç.
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h6>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</h6>
                        <div class="card">
                            <div class="card-body">
                                {{ operation.notes|default:"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"|linebreaks }}
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 d-flex gap-2">
                        <a href="{% url 'mebel:operations_list' %}" class="btn btn-secondary">
                            ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
                        </a>
                        
                        {% if operation.can_edit %}
                        <a href="{% url 'mebel:operation_edit' operation.id %}" class="btn btn-warning">
                            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </a>
                        {% endif %}
                        
                        <a href="{{ operation.material.get_absolute_url }}" class="btn btn-primary">
                            üëÅÔ∏è –ö –º–∞—Ç–µ—Ä–∏–∞–ª—É
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}