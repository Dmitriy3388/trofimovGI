{% extends "mebel/base.html" %}
{% load static %}

{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px; margin: 0 auto; padding: 20px;">
    <h1 class="text-center mb-4" style="color: #2c3e50; font-weight: 600;">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h1>

    <div class="card-modern">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è —Å –∞–≤–∞—Ç–∞—Ä–æ–º -->
        <div class="card-modern-header">
            <div class="text-center mb-4">
                {% if profile.photo and profile.photo.url %}
                    <img src="{{ profile.photo.url }}"
                         alt="–§–æ—Ç–æ {{ profile.user.username }}"
                         class="profile-avatar"
                         style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%; border: 5px solid rgba(255,255,255,0.3); box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
                {% else %}
                    <img src="{% static 'img/no_image.png' %}"
                         alt="–§–æ—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
                         class="profile-avatar"
                         style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%; border: 5px solid rgba(255,255,255,0.3); box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
                {% endif %}
            </div>

            <div class="text-center">
                <h2 class="card-modern-title" style="margin-bottom: 5px;">{{ profile.user.get_full_name|default:profile.user.username }}</h2>
                <p class="card-modern-subtitle">@{{ profile.user.username }}</p>
                <div class="online-status" style="display: inline-flex; align-items: center; gap: 5px; font-size: 0.9rem; opacity: 0.8;">
                    <span class="status-dot" style="width: 8px; height: 8px; background: #4ade80; border-radius: 50%; animation: pulse 2s infinite;"></span>
                    –í —Å–µ—Ç–∏
                </div>
            </div>
        </div>

        <!-- –î–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div class="card-modern-body">
            <div class="detail-row">
                <span class="detail-label">üë§ –õ–æ–≥–∏–Ω:</span>
                <span class="detail-value">{{ profile.user.username }}</span>
            </div>

            <div class="detail-row">
                <span class="detail-label">üìß Email:</span>
                <span class="detail-value">
                    {% if profile.user.email %}
                        {{ profile.user.email }}
                    {% else %}
                        <span style="color: #999;">–ù–µ —É–∫–∞–∑–∞–Ω</span>
                    {% endif %}
                </span>
            </div>

            <div class="detail-row">
                <span class="detail-label">üéÇ –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</span>
                <span class="detail-value">
                    {% if profile.date_of_birth %}
                        {{ profile.date_of_birth|date:"d.m.Y" }}
                    {% else %}
                        <span style="color: #999;">–ù–µ —É–∫–∞–∑–∞–Ω–∞</span>
                    {% endif %}
                </span>
            </div>

            <div class="detail-row">
                <span class="detail-label">üè¢ –†–æ–ª—å:</span>
                <span class="detail-value">
                    {% if user.groups.all %}
                        {{ user.groups.all.0.name }}
                    {% else %}
                        {% if user.is_staff %}
                            <span style="color: #e74c3c;">üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                        {% else %}
                            <span style="color: #999;">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                        {% endif %}
                    {% endif %}
                </span>
            </div>

            <div class="detail-row">
                <span class="detail-label">üìÖ –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
                <span class="detail-value">{{ profile.user.date_joined|date:"d.m.Y" }}</span>
            </div>
        </div>

        <!-- –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
        <div class="card-actions">
            <a href="{% url 'account:edit' %}" class="btn-modern btn-primary-gradient">
                <i class="bi bi-pencil-square"></i>
                –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
            </a>

            <a href="{% url 'account:password_change' %}" class="btn-modern btn-outline-modern">
                <i class="bi bi-shield-lock"></i>
                –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
            </a>

            <a href="{% url 'account:logout' %}" class="btn-modern btn-danger-modern">
                <i class="bi bi-box-arrow-right"></i>
                –í—ã–π—Ç–∏
            </a>
        </div>
    </div>
</div>

<style>
/* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ */
@keyframes pulse {
    0% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.7);
    }
    70% {
        transform: scale(1);
        box-shadow: 0 0 0 5px rgba(74, 222, 128, 0);
    }
    100% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(74, 222, 128, 0);
    }
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 768px) {
    .container {
        padding: 10px;
    }

    .profile-avatar {
        width: 120px !important;
        height: 120px !important;
    }

    .card-actions {
        flex-direction: column;
    }

    .detail-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
    }

    .detail-value {
        text-align: left;
    }
}
</style>
{% endblock %}